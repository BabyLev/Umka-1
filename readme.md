# UMKA Server

### Краткое описание

> Проект создавался изначально как тестовая работа для получения параметров спутника Umka-1, но затем перерос в веб-сервис, который позволяет работать с параметрами любого спутника. Проект, по крайней мере, двигается в эту сторону

---

### Запуск

> Чтобы запустить проект, нужно, чтобы на компьютере была версия Go не ниже, чем указанная в файле
> [go.mod](https://github.com/BabyLev/Umka-1/blob/main/go.mod)\
>  TODO: сделать возможность выбора порта, на котором запускается веб сервер

### Порт: localhost:8080

## Доступные HTTP ручки

### HTTP метод GET

- ### service.Calculate

```
"/calculate/"
Ручка возвращает длину, широту, долготу и адрес спутника на карте
Пример того, что ручка может вернуть:
{
    lat: -66.37755182682588
    lon: 46.50098627409187
    alt: 557.4210161450574
    gmapslink: "https://www.google.com/maps/place/-66.377552+46.500986"
}
```

---

- ### service.GetSatellite

```
"/satellite/{id}"
Cледующая ручка возвращает спутник по переданному ID
Пример того, что можно получить на выходе:
{
    "line1":"1 1234U 56789G  1234.56789  .000000  00000-0",
    "line2":"7 7777  88888 99.000 1111  22.22333 33.444 555",
    "name":"123"
}

```

---

### HTTP метод POST

- ### service.LookAngles

```
"/look-angles/"
эта ручка возвращает азимут, элевацию и диапазон спутника
```

---

- ### service.VisibleTimeRange

```
"/time-ranges/"
ручка, высчитывающая временные диапазоны, когда видно спутник над заданной точкой в нужном количестве
```

---

- ### service.FindSatellite

```
"/satellite/"
она возвращает все спутники по переданному пользователем имени
Пример JSON:
{
"name": "123"
}
Пример того, что ручка может вернуть:
{
    "satellites":
        {"1":
            {"line1": "1 12345U 23091G   5555.99999  .00011108  00000",
            "line2": "1 12345U 23091G   5555.99999  .00011108  00000",
            "name": "123"
            },
        "2":
            {"line1": "1 5757U 3333G   12121.43210  .00011108  00000-0",
            "line2": "2 77777  1111 222.3333 0000  88.9999 123.0000",
            "name": "111"}
        }
}
```

---

### HTTP метод PUT

- ### service.AddSatellite

```
"/satellite/"
данная ручка добавляет преданный спутник в хранилище и возращает его ID
Пример JSON:
{
    "line1": "1 12345U 23091G   5555.99999  .00011108  00000",
    "line2": "1 12345U 23091G   5555.99999  .00011108  00000",
    "name": "777"
}
Пример того, что ручка может вернуть:
{
    "id": 1
}
```

---

### HTTP метод DELETE

- ### service.DeleteSatellite

```
"/satellite/{id}"
как не странно эта ручка удаляет спутник из хранилища по ID
Пример того, что ручка может вернуть:
"спутник успешно удалился id = 1"
```

---

### HTTP метод PATCH

- ### service.UpdateSatellite

```
"/satellite/"
последняя ручка принимает на вход ID и новые данные спутника: {line1, line2, name}. Изменяет старые значения спутника на новые
Пример JSON:
{
     "id": 5,
        "satellite": {
            "line1": "1 12345U 23091G   5555.99999  .00011108  99999",
        "line2": "1 12345U 23091G   5555.99999  .00011108  99999",
        "name": "TOP"
        }
}
```
